@model IEnumerable<Blog>

<link rel="stylesheet" href="~/lib/highlight/styles/vs2015.css">
<script src="~/lib/highlight/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<div id="blogBody" class="col-md-9">
    @if (ViewData["CurrentRoute"] != null)
    {
    <div class="blogPost">
        <a class="blogTitle">Searching: @ViewData["CurrentRoute"]</a>
    </div>
    }
    @foreach (Blog blog in Model)
    {
    <div class="blogPost">
        <a class="blogTitle" href="/blog/@blog.Id">@blog.Title</a>
        <div class="header">
            <small class="gray">@blog.Create_Ts.ToString("yyyy-MM-dd hh:mm")</small>
            @{Random rnd = new Random();
                    int ranComment = rnd.Next(1, 13);
                    int ranReadCount = rnd.Next(1, 10000);
            }
            <small class="gray view_count">@string.Format("{0:n0}", blog.view_count)</small>
            <small class="orange comment_count">(@ranComment)</small>
        </div>
        <div class="blogContent">
            @(blog.Markdown_Content == null ? "" : new string(System.Text.RegularExpressions.Regex.Replace(blog.Markdown_Content, "<.*?>", String.Empty).Take(200).ToArray()))
            <a href="/blog/@blog.Id" class="l">@(blog.Markdown_Content != null && blog.Markdown_Content.Count() > 200 ? "...(more)" : "")</a>
        </div>
        <div class="blogFooter">
            <div class="category">
                Category:
                <a href="/category/@blog.Category" class="l">@blog.Category</a>
            </div>
            @if (!string.IsNullOrEmpty(blog.Tags))
                {
            <div class="tags">
                Tags:
                @foreach (var item in blog.Tags.Split(','))
                        {
                            if (item != "")
                            {<a href="/tags/@item.Trim()" class="l" style="margin-right:4px">@item.Trim()</a>}
                    }
            </div>
                }
        </div>
    </div>
    }
    <partial name="~/Views/Shared/_pagination.cshtml" />
</div>
<partial name="~/Views/Shared/_sidebar.cshtml" />